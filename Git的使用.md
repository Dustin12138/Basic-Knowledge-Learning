## Git的使用

### 0 Git简介
- Git是世界上最先进的**分布式版本控制系统**
- 版本控制系统
  - 自动记录文件改动
  - 协同编辑
#### 0.1 Git的诞生
- 前期的集中式版本控制系统：CVS和SVN，速度慢，必须；联网使用
- 中期的商业版本控制系统：BitKeeper
- Linus自己写了一个分布式版本控制系统——Git
- Github网站：为开源项目提供存储
#### 0.2 版本控制系统：集中式&分布式
- 集中式版本控制系统：
  - 中央服务器作为信息收发的核心（图书馆）
  - 必须联网工作
- 分布式版本控制系统：
  - 没有中央服务器
  - 存在充当“中央服务器”的电脑，便于信息交互
  - 每台电脑上都是完整的版本库
  - 只需互相推送修改即可同步信息
  - 强大的分支管理能力
- 其他集中式版本控制系统
  - CVS：存在提交文件不完整和版本库随机损坏的可能
  - SVN：修正了CVS的一些问题，目前应用最多的集中式版本控制系统
  - VSS：微软出品，集成在Visual Studio中，反人类的设计
- 其他分布式版本控制系统
  - Mericurial
  - Bazaar
### 1 Git的安装
#### 1.1 Linux操作系统下的安装
- Ubuntu或Debian：`sudo apt-get install git`或`sudo apt-get install git-core`(老版的Linux)
- 其他Linux版本：从Git官网下载源码，依次输入`./config` `make` `sudo make install`

#### 1.2 Windows操作系统下的安装

1. 在Git官网下载安装程序（或镜像）
2. 在Git Bash命令行中输入
``` Git
git config --global user.name "Your Name"
git config --global user.email "email@example.com"
```

自报家门：姓名和email地址

注：`global`参数使得该设置对于该电脑上的所有库都适用。

### 2 创建Git版本库

- 版本库：repository

- 操作代码：

  1. 创建空目录：

     ```Git 
     mkdir learningit
     cd learningit
     pwd
     ```

  2. 把这个目录变成Git可以管理的仓库：

     ```Git
     git init
     ```

     - 代码执行之后目录下会有一个.git目录，用来跟踪管理版本库
     - ls -ah可以查看.git目录

  3. 把文件添加到版本库：

     - Git只能跟踪文本文件的改动，不能跟踪二进制文件的改动（只知道其大小的变化）
     - （建议）统一使用UTF-8编码
     - 不要使用Windows自带的文本文档编辑器编写文件

     ```Git
     git add readme.txt
     git commit -m "wrote a readme file"
     ```

     注：

     - `git commit`后的`-m`后面输入的是本次提交的说明，
     - `git commit`前可以使用`git add`添加多个文件，最后一起提交
     - `git commit`可以视为一个对文件修改的快照

### 3 库修改管理

#### 3.1 查看和检测修改

- 查看仓库状态：`git status`
- 查看修改详情：`git diff`(如果有文件被修改过)

#### 3.2 版本修改的查询和调整

#### 3.2.1 查询修改的历史记录

- 查看文件修改的历史记录：`git log`，显示时间顺序为从**最近的日志到最远的日志**
- 只显示版本号和修改内容的历史记录：加`–pretty=oneline`参数

  - 其中的一大串数字是十六进制的版本号（commit id）
  - SVN的版本号是1,2,3等正整数
  - 版本与版本之间被串成了时间线，若使用可视化工具查看该历史即可以看到更清晰的时间线

#### 3.2.2 版本的回溯和前进

- 版本的名称：

  - 当前版本：`HEAD`
  - 前一个版本:`HEAD^`
  - 前两个版本：`HEAD^^`
  - 以此类推
  - 前100个版本：`HEAD^100`

- 操作代码：`git reset --hard HEAD^n或版本号前几位（足够使Git找到该版本）`，n代表前n个版本。

- 操作原理：Git内部有指向当前版本的指针，如果前进或者回溯版本，则只更改指针指向的版本。

- 版本前进（穿梭到未来）：

  - 若前面的命令行没有关闭，则可以查看这一行的版本号，再使用前述的操作代码，在参数后面输入版本号。
- 如果命令行已经关闭，可以使用查询版本前进和回溯的历史记录：
  

**查询版本前进和回溯的历史记录**：`git reflog`

  以此查询版本号，使用前述的操作代码。

### 3.3 



  

  

  





